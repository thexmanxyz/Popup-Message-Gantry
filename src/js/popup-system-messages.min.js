function PopupSystemMessages(s){var n="#system-message-container",o=".g-system-messages",t=".close",i=".alert",d="popup-loaded";this.initialize=function(){this.addOpenModal(),this.addCloseModal(),this.addEscapeKeyListener(),this.autoOpen()},this.addOpenModal=function(){var e=this;s(n).bind("DOMNodeInserted",function(){e.openModal()})},this.addCloseModal=function(){var e=this;s(n).bind("DOMNodeRemoved",function(){e.closeModal()})},this.addEscapeKeyListener=function(){s(document).on("keyup",this.getKeyUpHandling())},this.openModal=function(){var e=s(n).closest(o);e.addClass(d),e.addClass("popup-opened"),e.find(t).focus(),s("body").addClass(d)},this.closeModal=function(){s("#system-message > div").length<=1&&(s(n).closest(o).removeClass(d),s("body").removeClass(d))},this.getKeyUpHandling=function(){return function(e){"27"==e.keyCode&&0<s(o+"."+d).length&&s(n).find(i+" "+t).click()}},this.autoOpen=function(){0<s(n).closest(o).find(i).length&&this.openModal()},this.initialize()}!function(e){e(window).load(function(){new PopupSystemMessages(e)})}(jQuery);